<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Linie </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Linie ">
      
      <link rel="icon" href="favicon.ico">
      <link rel="stylesheet" href="public/docfx.min.css">
      <link rel="stylesheet" href="public/main.css">
      <meta name="docfx:navrel" content="toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      
      
      
      <meta name="docfx:docurl" content="https://github.com/basp/linie/blob/main/docfx_project/index.md/#L1">
  </head>

  <script type="module">
    import options from './public/main.js'
    import { init } from './public/docfx.min.js'
    init(options)
  </script>

  <script>
    const theme = localStorage.getItem('theme') || 'auto'
    document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
  </script>


  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="index.html">
            <img id="logo" class="svg" src="logo.svg" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" style="margin-top: -.65em; margin-left: -.8em" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="linie">Linie</h1>

<p>Linie is a mathematics library that is very loosely based on <a href="https://github.com/">glm</a> with an ideomatic .NET API. The main goal is to provide a foundation that can be easily integrated to your graphics related software. Linie is <strong>not</strong> a general purpose linear algebra library.</p>
<h2 id="features">features</h2>
<ul>
<li>Linie is 100% .NET, written in C# and has no dependencies.</li>
<li>It is tiny and can easily be included as source.</li>
<li>Has an ideomatic API that confirms to .NET conventions.</li>
<li>Supports most of the common linear algebra operations.</li>
<li>Runs completly on the CPU by design.</li>
<li>Geared towards beginners and educational purposes.</li>
<li>Tries to be fast but prefers ease of use over performance.</li>
<li>All vectors are implemented as <em>value</em> types (i.e. <code>struct</code>).</li>
<li>All matrices are implemented as <em>reference</em> types (i.e. <code>class</code>).</li>
</ul>
<h2 id="overview">overview</h2>
<p>The core of Linie consists of the vector and matrix types. Since Linie is geared towards computer graphics we support fixed size vectors and matrices of the following types:</p>
<ul>
<li><code>Vector2</code></li>
<li><code>Vector3</code></li>
<li><code>Vector4</code></li>
<li><code>Matrix2x2</code></li>
<li><code>Matrix3x3</code></li>
<li><code>Matrix4x4</code></li>
</ul>
<p>Most of the focus is on the <code>Vector4</code> and <code>Matrix4x4</code> types since it is expected these will be used most often for the cases that Linie is designed for.</p>
<h2 id="positions-and-directions">positions and directions</h2>
<p>Linie is designed to operate in 3D space using 4D vectors and matrices as is common in computer graphics. Positions and directions are both represented by a <code>Vector4</code> but only positions have their <code>W</code> component set to anything else but zero. Directions always have their <code>W</code> component set to zero. Positions have their <code>W</code> component set to one by default but any <code>Vector4</code> with a non-zero <code>W</code> component is considered a position.</p>
<blockquote>
<p>There have been periods in time where Linie would explicitly differentiate between a direction and a point and would not allow operations between them that would not make sense. Although this does provide some safety it was decided to drop this and leave it up to the client of the library instead.</p>
</blockquote>
<p>The library does offer a few methods that make it a little bit more explicit what we are doing.</p>
<ul>
<li>The <code>Vector4.CreatePosition</code> method creates <code>Vector4</code> instances with their <code>W</code> component set to one.</li>
<li>The <code>Vector4.CreateDirection</code> method creates <code>Vector4</code> instances with their <code>W</code> component set to zero.</li>
<li>The <code>IsPosition</code> and <code>IsDirection</code> properties can be used to query whether a <code>Vector4</code> is a position or direction vector.</li>
<li>The <code>AsPosition</code> and <code>AsDirection</code> methods can be used to force any <code>Vector4</code> into a particular mode (i.e. position or direction).</li>
</ul>
<blockquote>
<p>Note that Linie does not check for valid operations. If you want to add a point to a point you are free to do so. The math will work out but the results may not be what you expect.</p>
</blockquote>
<h3 id="performance-tradeoffs">performance tradeoffs</h3>
<p>The Microsoft recommendation is to keep the size of a <code>struct</code> type below or equal to <code>16</code> bytes. All vectors can fit into this recommendation range so they are all implemented as a <code>struct</code>.</p>
<p>However, the only matrix that would fit is <code>Matrix2x2</code>. In order to keep the behavior for all matrices consistent they are all implemented as reference (i.e. <code>class</code>) types.</p>
<p>In order to mitigate some of the allocation drawbacks of managing matrices on the heap the library offers some imperative operations that mutate an existing instance. These are currently provided for expensive <code>Matrix4x4</code> operations. Their return type will be <code>void</code> and they will have a <code>ref</code> parameter to store the results. These are generally a bit faster (and also more memory efficient) than their <em>functional</em> counterparts (which return new instances).</p>
<p>For example, the following demonstrates the function and imperative multiply operations on a <code>Matrix4x4</code> instance.</p>
<pre><code>// Functional, result is a new instance that needs to be allocated.
// This will allocate and is generally a bit easier to understand.
var a = Matrix4x4.Identity;
var b = Matrix4x4.Identity;
var c = a * b; // Equivalent to Matrix4x4.Multiply(a, b);

// Imperative, result was already allocated, mutate in place.
// This will not allocate and is generally a bit faster if we can re-use 
// instances.
var a = Matrix4x4.Identity;
var b = Matrix4x4.Identity;
var c = new Matrix4x4();
Matrix4x4.Multiply(a, b, ref result);
</code></pre>
</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/basp/linie/blob/main/docfx_project/index.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>
        
      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>


    <footer class="border-top">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>